<?xml version="1.0" encoding="UTF-8"?>
<cache xmlns="http://geode.apache.org/schema/cache" xmlns:gpdb="http://schema.pivotal.io/gemfire/gpdb"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://geode.apache.org/schema/cache http://geode.apache.org/schema/cache/cache-1.0.xsd
                        http://schema.pivotal.io/gemfire/gpdb http://schema.pivotal.io/gemfire/gpdb/gpdb-2.3.xsd"
	version="1.0">

	<pdx read-serialized="true"> <!-- persistent="false"/> -->
		<pdx-serializer>
			<class-name>org.apache.geode.pdx.ReflectionBasedAutoSerializer</class-name>
			<parameter name="classes">
				<string>io.pivotal.gemfire.domain.*</string>
			</parameter>
		</pdx-serializer>
	</pdx>

	<jndi-bindings>
		<jndi-binding jndi-name="datasource" type="SimpleDataSource"
			jdbc-driver-class="org.postgresql.Driver" user-name="gpadmin"
			password="pivotal" connection-url="jdbc:postgresql://172.16.44.129:5432/gpadmin">
		</jndi-binding>
	</jndi-bindings>

	<region name="TRACE">
		<region-attributes refid="PARTITION">
			<partition-attributes redundant-copies="1">
				<partition-resolver>
					<class-name>io.pivotal.gemfire.domain.TracePartitionResolver</class-name>
				</partition-resolver>
			</partition-attributes>
		</region-attributes>
	</region>

	<region name="MASTER">
		<region-attributes refid="PARTITION">
			<partition-attributes redundant-copies="1" colocated-with="TRACE">
				<partition-resolver>
					<class-name>io.pivotal.gemfire.domain.TracePartitionResolver</class-name>
				</partition-resolver>
			</partition-attributes>
		</region-attributes>
	</region>

	<region name="TRACE_TRANSFORMED">
		<region-attributes refid="PARTITION">
			<partition-attributes redundant-copies="1" colocated-with="TRACE">
				<partition-resolver>
					<class-name>io.pivotal.gemfire.domain.TracePartitionResolver</class-name>
				</partition-resolver>
			</partition-attributes>
			
			<!-- 
			<cache-listener>
				<class-name>io.pivotal.gemfire.listener.TraceCacheListener</class-name>
			</cache-listener>
			 -->
		</region-attributes>
	</region>

	<region name="TRACE_GPDB">
		<region-attributes refid="PARTITION">
			<partition-attributes redundant-copies="1" colocated-with="TRACE">
				<partition-resolver>
					<class-name>io.pivotal.gemfire.domain.TracePartitionResolver</class-name>
				</partition-resolver>
			</partition-attributes>
		</region-attributes>
	</region>
	
	<!-- 
	<region name="TRACE_GPDB">
		<region-attributes refid="PARTITION">
			<partition-attributes redundant-copies="1" />
		</region-attributes>
		<gpdb:store datasource="datasource">
			<gpdb:types>
				<gpdb:pdx name="io.pivotal.demo.domain.Trace" table="trace">
					<gpdb:id field="equip_id" />
					<gpdb:fields>
						<gpdb:field name="equip_id" column="id" />
						<gpdb:field name="param" />
					</gpdb:fields>
				</gpdb:pdx>
			</gpdb:types>
		</gpdb:store>
	</region>
	
	<gpdb:gpfdist port="8003" />
	-->
	
	<function-service>
		<function>
			<class-name>io.pivotal.gemfire.functions.PRBFunction</class-name>
		</function>
	</function-service>
</cache>